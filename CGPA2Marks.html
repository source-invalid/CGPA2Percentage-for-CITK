<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CGPA2Percentage Converter — CITK</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet" />

  <!-- Material Web (Material Design 3) via import map -->
  <script type="importmap">
    {
      "imports": {
        "@material/web/": "https://esm.run/@material/web/"
      }
    }
  </script>
  <script type="module">
    import '@material/web/all.js';
    import {styles as typescaleStyles} from '@material/web/typography/md-typescale-styles.js';
    document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
  </script>

  <style>
    :root {
      /* Light theme tokens */
      --md-sys-color-primary: #1d5cf2;
      --md-sys-color-on-primary: #ffffff;
      --md-sys-color-surface: #fcfcff;
      --md-sys-color-on-surface: #121316;
      --md-sys-color-outline: #c8cad2;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        /* Dark theme tokens */
        --md-sys-color-primary: #a9c3ff;
        --md-sys-color-on-primary: #072a78;
        --md-sys-color-surface: #0f1116;
        --md-sys-color-on-surface: #e7e9ef;
        --md-sys-color-outline: #3b3f4a;
      }
    }
	
	/* Material Symbols (Rounded) sizing for consistent buttons */
	  .material-symbols-rounded {
		font-family: "Material Symbols Rounded";
		font-weight: normal;
		font-style: normal;
		font-size: 20px;            /* tighter than 24px to avoid button growth */
		line-height: 1;             /* prevent vertical stretch */
		display: inline-block;
		vertical-align: middle;     /* align with text baseline */
		letter-spacing: normal;
		text-transform: none;
		white-space: nowrap;
		direction: ltr;
		font-variation-settings:
		  "FILL" 0,
		  "wght" 400,
		  "GRAD" 0,
		  "opsz" 24;                /* recommended opsz for crisp icons */
	  }

	  /* Keep labels from wrapping and changing height */
	  md-filled-button,
	  md-outlined-button {
		white-space: nowrap;
	}

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Roboto", system-ui, -apple-system, Segoe UI, Arial, sans-serif;
      background: radial-gradient(1200px 800px at 20% 0%, rgba(29,92,242,0.10), transparent 60%),
                  linear-gradient(180deg, var(--md-sys-color-surface), var(--md-sys-color-surface));
      color: var(--md-sys-color-on-surface);
    }

    .wrap {
      min-height: 100dvh;
      display: grid;
      grid-template-rows: auto 1fr auto;
    }

    header {
      padding: 32px 16px 8px;
      text-align: center;
    }
    header h1 {
      margin: 0;
      letter-spacing: -0.02em;
    }
    header p {
      margin: 8px 0 0;
      opacity: 0.8;
    }

    main {
      display: grid;
      place-items: start center;
      padding: 16px;
    }

    .card {
      width: min(720px, 100%);
      background: var(--md-sys-color-surface);
      border-radius: 20px;
      border: 1px solid var(--md-sys-color-outline);
      box-shadow:
        0 10px 30px rgba(0,0,0,0.08),
        0  2px 10px rgba(0,0,0,0.06);
      padding: 24px;
    }

    .stack { display: grid; gap: 16px; }
    .row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }

    #resultCard {
      display: none;
      margin-top: 8px;
    }
    #resultCard.show { display: block; }

    .result-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 520px) {
      .result-grid { grid-template-columns: 1fr; }
    }

    .result-item {
      border: 1px dashed var(--md-sys-color-outline);
      border-radius: 12px;
      padding: 14px;
    }
    .result-label {
      font-size: 0.9rem;
      opacity: 0.7;
      margin-bottom: 6px;
    }
    .result-value {
      font-size: 1.35rem;
      font-weight: 600;
      letter-spacing: 0.2px;
    }

    .disclaimer {
      margin-top: 20px;
      border-top: 1px solid var(--md-sys-color-outline);
      padding-top: 16px;
      opacity: 0.95;
    }
    .formula {
      background: color-mix(in oklab, var(--md-sys-color-primary) 12%, transparent);
      border: 1px solid var(--md-sys-color-outline);
      border-radius: 12px;
      padding: 12px;
      margin: 8px 0 0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Roboto Mono", monospace;
      white-space: pre-wrap;
      line-height: 1.35;
    }

    footer {
      padding: 20px 16px 28px;
      text-align: center;
      opacity: 0.8;
    }
    a {
      color: var(--md-sys-color-primary);
      text-decoration: none;
    }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1 class="md-typescale-headline-large">CGPA2Percentage Converter</h1>
      <p class="md-typescale-title-medium">For Central Institute of Technology Kokrajhar</p>
    </header>

    <main>
      <section class="card">
        <div class="stack">
          <md-outlined-text-field
            id="inputValue"
            label="Enter CGPA/SGPA or % Marks"
            type="text"
            inputmode="decimal"
            supporting-text="Tip: Values ≤ 10 are treated as CGPA/SGPA; values > 10 are treated as percentage (0–100)."
            style="width: 100%;"
          ></md-outlined-text-field>

          <div class="row">
			<md-filled-button id="convertBtn" trailing-icon>
				Convert
				<span slot="icon" class="material-symbols-rounded" aria-hidden="true">autorenew</span>
			</md-filled-button>
            <md-outlined-button id="clearBtn">
              Clear
            </md-outlined-button>
          </div>

          <div id="resultCard" class="card" style="padding:16px;">
            <div class="row" style="justify-content: space-between;">
              <div class="md-typescale-title-medium" id="detectedType">Detected: —</div>
              <div class="md-typescale-title-medium" id="statusTag" style="opacity:.8;"></div>
            </div>

            <div class="result-grid" style="margin-top: 10px;">
              <div class="result-item">
                <div class="result-label">CGPA/SGPA</div>
                <div class="result-value" id="outCgpa">—</div>
              </div>
              <div class="result-item">
                <div class="result-label">Percentage (%)</div>
                <div class="result-value" id="outPct">—</div>
              </div>
            </div>
          </div>

          <div class="disclaimer md-typescale-body-medium">
            <strong>Note:</strong> Conversions follow CITK’s official CGPA/SGPA ↔ percentage rules documented in the Rules & Regulations. See the reference document for authoritative details:
            <a href="https://cit.ac.in/academics-rules-and-regulation?filename=1591905179.pdf" target="_blank" rel="noopener">CITK Rules & Regulations (PDF)</a>.
            <div class="formula">
Formulas (CITK):
• For SGPA/CGPA ≥ 9.0: Percentage = 15 × CGPA – 50
• For SGPA/CGPA < 9.0: Percentage = 10 × CGPA – 5.0

Reverse (from Percentage to CGPA):
• If Percentage ≥ 85: CGPA = (Percentage + 50) ÷ 15
• If Percentage < 85:  CGPA = (Percentage + 5) ÷ 10
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="md-typescale-body-medium">
      Developed by <a href="https://sanjibkumarmalakar.netlify.app" target="_blank" rel="noopener">Sanjib Kumar Malakar</a>
    </footer>
  </div>

  <script type="module">
    // Utilities
    const clamp = (v, min, max) => Math.min(Math.max(v, min), max);
    const isFiniteNumber = (v) => Number.isFinite(v) && !Number.isNaN(v);

    // CITK piecewise conversion (forward)
    function cgpaToPercent(cgpa) {
      if (cgpa >= 9) return 15 * cgpa - 50;
      return 10 * cgpa - 5;
    }
    // Inverse (from percentage to CGPA), branch at 85%
    function percentToCgpa(pct) {
      if (pct >= 85) return (pct + 50) / 15;
      return (pct + 5) / 10;
    }

    // Detect input domain
    function detectDomain(x) {
      // Heuristic: ≤10 => CGPA/SGPA, >10 => percentage
      return x <= 10 ? "cgpa" : "percentage";
    }

    // Formatters
    const fmt2 = (x) => (Math.round(x * 100) / 100).toFixed(2);

    // DOM elements
    const $ = (sel) => document.querySelector(sel);
    const inputField = $('#inputValue');
    const convertBtn = $('#convertBtn');
    const clearBtn = $('#clearBtn');
    const resultCard = $('#resultCard');
    const detectedTypeEl = $('#detectedType');
    const statusTagEl = $('#statusTag');
    const outCgpaEl = $('#outCgpa');
    const outPctEl = $('#outPct');

    // Handlers
    function compute() {
      const raw = inputField.value.trim().replace(/,/g, '');
      if (!raw) {
        showError("Please enter a numeric value.");
        return;
      }
      const x = Number(raw);
      if (!isFiniteNumber(x)) {
        showError("Input must be a valid number.");
        return;
      }

      const domain = detectDomain(x);
      let cgpa, pct, status = "";

      if (domain === "cgpa") {
        if (x < 0 || x > 10) {
          showError("CGPA/SGPA must be in the range 0–10.");
          return;
        }
        cgpa = x;
        pct = cgpaToPercent(cgpa);
        // Clamp percentage to 0–100 for display sanity
        pct = clamp(pct, 0, 100);
        detectedTypeEl.textContent = "Detected: CGPA/SGPA";
        status = cgpa >= 9 ? "High CGPA branch (≥ 9.0)" : "Standard branch (< 9.0)";
      } else {
        if (x < 0 || x > 100) {
          showError("Percentage must be in the range 0–100.");
          return;
        }
        pct = x;
        cgpa = percentToCgpa(pct);
        // Clamp CGPA to 0–10 for display sanity
        cgpa = clamp(cgpa, 0, 10);
        detectedTypeEl.textContent = "Detected: Percentage";
        status = pct >= 85 ? "Inverse of high CGPA branch (≥ 85%)" : "Inverse of standard branch (< 85%)";
      }

      outCgpaEl.textContent = fmt2(cgpa);
      outPctEl.textContent  = fmt2(pct);
      statusTagEl.textContent = status;
      resultCard.classList.add('show');
    }

    function showError(msg) {
      resultCard.classList.add('show');
      detectedTypeEl.textContent = "Input error";
      statusTagEl.textContent = msg;
      outCgpaEl.textContent = "—";
      outPctEl.textContent  = "—";
    }

    convertBtn.addEventListener('click', compute);
    clearBtn.addEventListener('click', () => {
      inputField.value = "";
      resultCard.classList.remove('show');
      detectedTypeEl.textContent = "Detected: —";
      statusTagEl.textContent = "";
      outCgpaEl.textContent = "—";
      outPctEl.textContent  = "—";
      inputField.focus();
    });
    inputField.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        compute();
      }
    });
  </script>
</body>
</html>
